

<!-- Meanless: Transportation (2025) 52:1119-1145 https://doi.org/10.1007/s11116-023-10451-8 Check for updates-->

# Mobility knowledge graph: review and its application in public transport

Qi Zhang ${}^{1} \cdot$ Zhenliang ${\mathrm{{Ma}}}^{1} \cdot$ Pengfei Zhang ${}^{2} \cdot$ Erik Jenelius ${}^{1}$ Accepted: 17 November 2023 / Published online: 8 December 2023 © The Author(s) 2023

## Abstract

Understanding human mobility in urban areas is crucial for transportation planning, operations, and online control. The availability of large-scale and diverse mobility data (e.g., smart card data, GPS data), provides valuable insights into human mobility patterns. However, organizing and analyzing such data pose significant challenges. Knowledge graph (KG), a graph-based knowledge representation method, has been successfully applied in various domains but has limited applications in urban mobility. This paper aims to address this gap by reviewing existing KG studies, introducing the concept of a mobility knowledge graph (MKG), and proposing a general learning framework to construct MKG from smart card data. The MKG represents hidden travel activities between public transport stations, with stations as nodes and their relations as edges. Two decomposition approaches, rule-based and neural network-based models, are developed to extract MKG relations from smart card data, capturing latent spatiotemporal travel dependencies. The case study is conducted using smart card data from a heavily used urban railway system to validate the effectiveness of MKG in predicting individual trip destinations. The results demonstrate the significance of establishing an MKG database, as it assists in a typical problem of predicting individual trip destinations for public transport systems with only tap-in records. Additionally, the MKG framework offers potential for efficient data management and applications such as individual mobility prediction and personalized travel recommendations.

Keywords Smart card data $\cdot$ Knowledge graph $\cdot$ Knowledge representation $\cdot$ Relation extraction - Public transport

---

<!-- Footnote -->

Z Zhenliang Ma

zhema@kth.se

Qi Zhang

qzhan@kth.se

Pengfei Zhang

zhangpfscut@gmail.com

Erik Jenelius

erik.jenelius@abe.kth.se

${}^{1}$ Department of Civil and Architectural Engineering,KTH Royal Institute of Technology, 10044 Stockholm, Sweden

Institute of Physics, Henan Academy of Sciences, Zhengzhou 450002, China

<!-- Footnote -->

---

<!-- Meanless: Springer-->




<!-- Meanless: 1120 Transportation (2025) 52:1119-1145-->

## Introduction

Efficient and effective urban mobility systems are essential for the development of smart and sustainable cities (Gonçalves et al. 2017). To make informed decisions and interventions, it is crucial to understand human mobility patterns and behaviors, particularly in normal and disrupted situations (e.g., congestion, pandemics, and natural disasters). The availability of large-scale and diverse mobility data (for example, GPS trajectory data, smart card data in public transport, and geotagging social media data), enables a detailed understanding of human mobility patterns at a granular level.

Numerous studies have explored travel patterns and the factors influencing them using mobility data (Zhao et al. 2020; Gao et al. 2021; Hu et al. 2020). However, traditional methods face challenges in storing, processing, and analyzing large-scale mobility data. Relational databases and flat file systems may struggle to handle the complexity and volume of mobility data, leading to issues such as redundancy, slow queries, and limited scal-ability. Traditional data processing methods may also struggle to extract valuable insights from diverse and heterogeneous mobility data due to difficulties in analyzing complex relationships and patterns. Finally, these techniques often focus on static representations, failing to capture the temporal and spatial dynamics of mobility data and limiting our understanding of dynamic human mobility patterns and underlying factors.

The utilization of knowledge graph (KG) offers several potential solutions to address these challenges. The KG, a graph-based knowledge representation method, provides a flexible and scalable framework for organizing and representing complex relationships and dependencies within the data (Yu et al. 2017). It provides a flexible and scalable framework for organizing and analyzing complex relationships within mobility data. By structuring the data as a graph, KG enables efficient storage, retrieval, and analysis of large-scale mobility data. Moreover, KG allows for the integration of diverse data sources, facilitating a comprehensive understanding of mobility patterns. The graph-based structure of KG captures both the spatial and temporal aspects of mobility data, enabling the analysis of dynamic patterns and trends. Furthermore, KG's ability to capture semantic relationships between entities enhances its analytical capabilities and supports advanced data mining techniques. KG has gained attention and been successfully applied in various domains, including medical, web search, journalism, entertainment, network security, and pharmaceuticals (Zhang et al. 2020; Kim 2017; Zhang et al. 2021; Jia et al. 2018; Berven et al. 2020).

However, to the best of our knowledge, there is no existing approach that properly models mobility data based on KG. Most approaches treat mobility data as static KG, lacking the ability to capture the dynamic nature of mobility behavior (Deng et al. 2020; Chen et al. 2021; Liao et al. 2021; Trivedi et al. 2017; Mezni 2021). Static KG refers to a KG that does not incorporate time-related information and the relations between entities are fixed and do not evolve or vary with time (Chen et al. 2020). Despite the extensive research on static KGs in various domains, they are insufficient for capturing the time-varying characteristics of mobility behavior, which is highly dynamic in nature. Considering the complexity of mobility patterns, developing a comprehensive knowledge graph system is still a considerable distance away at this time point.

In light of these, in this paper, we aim to provide as much inspiration to the researchers who are interested in/devoted to addressing the mobility knowledge graph (MKG) modeling problem by defining the MKG framework and illustrating the value of MKG in driving an essential application in public transport. We first present a comprehensive review of relevant studies, covering various aspects of KG. We have made utmost efforts to ensure that this part covers various aspects of KG, providing a comprehensive and "one-stop" reading experience of the knowledge related to MKG. Furthermore, we discuss the principles of MKG modeling by summarizing the findings from the reviewed KG studies. In the second part of the paper, we propose an initial MKG construction example using AFC data as well as its application. The purpose of this example is not to create a best model for the studied problem (which we believe is still a work in progress), but rather to showcase the construction process based on the principles discussed in the review section. It is important to note that this example is not perfect, as demonstrated in the corresponding case study, but we anticipate it will serve as a valuable source of inspiration for further optimization and advancement in MKG modeling. Therefore, the objective of this paper is to provide a foundation for effectively representing and expressing mobility data through the KG method. To achieve this, the paper conducts a comprehensive review of existing studies on KG development and focuses on discussing the principles of MKG modeling. By doing so, the paper aims to offer valuable insights and guidance for future research in public transport, ultimately contributing to the advancement and application of KG in the context of mobility data. The main contributions are summarized as follows:

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1121-->

- Review and synthesize existing KG studies in different application areas and introduce the concept of MKG.

- Propose a learning framework to construct MKG from smart card data. It captures the spatiotemporal travel pattern correlations between stations using both rule-based linear decomposition and neural network-based nonlinear decomposition methods;

- Conduct a case study to validate the MKG construction framework and explore the value of MKG in the application of individual trips destination prediction using only tap-in records.

The remaining paper is organized as follows: Sect. 2 reviews knowledge graph studies in the literature, summarizes KG definitions in different domain areas, and synthesizes general KG construction and implementation pipelines. Section 3 proposes a general method of constructing MKG from mobility trajectory data using matrix decomposition methods, including rule-based and neural network-based models. The case study in Sect. 4 validates the MGK construction method using smart card data by comparing it with benchmark models. It also illustrates the value of MKG in contributing to a typical problem of predicting individual trip destinations for public transport systems with only tap-in records. Section 5 summarizes the main findings and future research directions.

## Review of knowledge graph

To survey the knowledge graph studies in different domains, we systematically searched academic publications in Scopus and Web of Science with publication dates ranging from January 2015 to December 2022. We searched the article title using keywords including 'knowledge graph' and 'knowledge base'. After screening for irrelevant and repeated papers, we retrieved a total of 6238 articles for analysis. Figure 1 shows the number of articles published each year. It shows a fast increasing number of KG publications in recent years, particularly after 2018.

KGs have been successfully applied and widely promoted in many fields. We analyzed the research status of KG in typical application domains (e.g., medical, education,

<!-- Meanless: Springer-->




<!-- Meanless: 1122 Transportation (2025) 52:1119-1145-->

<!-- Media -->

<!-- figureText: 2000 2018 2019 2020 2021 2022 Year 1800 1600 Number of articles 1400 1200 1000 800 600 400 200 0 2015 2016 2017 -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_3.jpg?x=156&y=184&w=1221&h=748&r=0"/>

Fig. 1 Number of articles on knowledge graphs published in 2015-2021

<!-- Media -->

financial, energy, etc.) according to the number of published articles. Figure 2 shows the distribution of KG studies (in total 689 papers) in different application domains from 2015 to 2022. Note that papers focusing on purely methodological development are not considered in this analysis. The most studied area is Medical/Drug, followed by Enterprise/ Financial and Education/Course. Compared to other areas, the area of urban transportation is far less studied but starting to emerge. For example, Tan et al. (2021) developed an urban traffic knowledge graph to integrate multi-source transportation data. It is used for traffic knowledge discovery and queries the shortest distance path between two nodes. Hu et al. (2022) proposed an individual travel knowledge graph to identify the public transportation commuters based on individual travel chain information from smart card transaction data and travel survey data. Shan and Cao (2017) proposed an urban knowledge graph, which composes multiple traffic topics (e.g., forecast of pedestrian volume), entities (e.g., POIs, weather, time slots, etc.), attributes (e.g., temperatures, air pressures) extracted from traffic text knowledge. It performed better than traditional statistical methods for inferring pedestrian volumes based on a hybrid reasoning algorithm. Wang et al. (2022) proposed a metro traffic flow prediction method based on knowledge graph representation learning and spatiotemporal graph neural network (KGR-STGNN). The metro knowledge graph extract entities (e.g., stations, routes, traffic events, and passenger flow, etc.), relations (e.g., the adjacent relations between stations, the attribution relations between stations and lines) and attribute of entities (e.g., station name, station id, latitude and longitude,etc.) from static and dynamic traffic data sources (e.g., metro network data, metro card swiping data, points of interest data). It used to store and represent factors related to metro traffic networks and facilitate to incorporate the influence of external factors into the prediction model based on the spatiotemporal graph neural network.

<!-- Media -->

<!-- figureText: Medical/Drug 150 200 250 300 Number of articles Enterprise/Financial Education/Course Energy/Electricity Application domains Risk/Safety Cyber/Internet Geographic Agricultural Government Urban traffic 0 50 100 -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_3.jpg?x=158&y=1437&w=1212&h=673&r=0"/>

Fig. 2 Research statistics on domain knowledge graph

<!-- Media -->

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1123-->

## Knowledge graph definition

Table 1 summarizes the domain knowledge graph definitions in different industries. The definitions share the same KG structure regardless of the application area. The KG is a directed labeled graph and its basic unit is a triple<entity, relation, entity>. For example, Elhammadi et al. (2020) developed the financial knowledge graph, where the triple form of<Steve Jobs, founderOf, Apple> means that Steve Jobs is the founder of Apple. In some research fields, the KG is represented in a quadruple form<entity, relation, entity, property>, in which the 'property' is used to describe attributes of entities or relations. For example, the quadruple<Lung cancer, disease_related_symptom, bloody sputum, probability 8.89%> means that the probability of bloody sputum for lung cancer is 8.89% (Li et al. 2020).

Conceptually, the entities (e.g., people, places, objects) in KG describe the subjects or objects in the studied domain. The relations (e.g., being married to, being located in) describe the factual/semantic relation between two entities. One common finding of the KG definition is that the KG only allows a single directional relation between an entity pair. Graphically, the KG can have one and only one directional edge between any two nodes. This may constrain its application in the mobility context where, for example, there could be more than one activity (relation) between a location (entity) pair such as work and shopping.

## KG development pipeline

The studies on KG mainly focuses on the construction methodology and applications based on KG. Based on the synthesis of the literature, Fig. 3 summarizes the general development pipeline of KG. It includes two key components: construction (C) and application (A). The objective of KG construction is to represent knowledge/data as the specific organization structure (i.e., triple or quadruple form). It mainly includes data acquisition and information extraction. The data used to construct KG can be either structured (e.g., trip records), semi-structured (e.g., GPS trajectories), or unstructured data (e.g., video/text data). The

<!-- Meanless: Springer-->




<!-- Meanless: 1124 Transportation (2025) 52:1119-1145-->

<!-- Media -->

Table 1 Selected domain knowledge graphs and their definitions

<table><tr><td>Domain</td><td>Descriptions</td></tr><tr><td>Financial (Elhammadi et al. 2020)</td><td>Financial knowledge graph. A triple form with entities include for example organization, cardinal, money, per- son, and relations include 'increase', 'rise', 'fall', etc. For example,<Steve Jobs, founderOf, Apple></td></tr><tr><td>Medical (Li et al. 2020)</td><td>Medical knowledge graph. A quadruple form with the entity set $\{$ diseases,medicines,symptoms $\}$ ,the relation set \{disease_related_symptom, disease_related_medicine\}, and the property set $\{$ occurrence,probability,specificity, reliability $\}$ . For example,<Lung cancer,disease_related_ symptom, bloody sputum, probability 8.89%></td></tr><tr><td>Traditional Chinese medicine (Yu et al. 2017)</td><td>Chinese medicine knowledge graph. A triple form with entities such as diseases, prescriptions, and chemical con- stituents of Chinese herbal medicine, and relations such as 'ingredient of', 'is a', 'use'. For example,<Pueraria, ingredient of, Pueraria power porridge></td></tr><tr><td>Agriculture (Chenglin et al. 2018)</td><td>Cn-MAKG: China meteorological and agriculture knowl- edge graph. A triple form with entities such as crops, phenology calendar of crops, meteorological conditions, and relations such as 'belong to', 'plant', 'time is', etc. For example,<Jianghuai District, plant, winter wheat></td></tr><tr><td>Education (Dang et al. 2019)</td><td>MOOC-KG: Educational knowledge graph. A triple form with entities such as courses, universities, teachers, and platforms, and the relations such as 'type', 'name', 'language', etc. For example,<Introduction to Probability, language, English></td></tr><tr><td>Urban traffic (Tan et al. 2021)</td><td>Urban traffic knowledge graph: A triple form with entities such as roads, stations, buses, and subways, and relations such as 'have itinerary', 'has trip', 'start from', etc. For example,<User A, start_from, Beijing station></td></tr><tr><td>Maritime (Zhang et al. 2019)</td><td>Maritime dangerous goods knowledge graph. A triple form with entities such as dangerous goods, chemical properties, and physical properties and relations such as 'has flash point', 'has packing', 'has container', etc. For example,<magnesium powder, separated_from, acrylic acid></td></tr><tr><td>Enterprise risk (Yang and Liao 2022)</td><td>Enterprise risk knowledge graph. A quadruple form with entities such as organizations, people, enterprises and relations include 'founder', 'chairman', 'executives', 'year of establishment'. For example,<Alibaba Group, Board Chairman, 2019, Zhang Yong></td></tr><tr><td>Cybersecurity (Jia et al. 2018)</td><td>Cybersecurity knowledge graph. A triple form with enti- ties such as vulnerability, assets, software, attack, and relations such as 'cause', 'threat level', 'threat type'. For example,<'CNNVD-2016', cause, Denial service></td></tr></table>

<!-- Media -->

KG construction also depends on the stored information type (Table 2), including time-series data (TS, information with time-tagged attributes and attribute dependencies over time), panel data (P, information with time-tagged attributes), and cross-sectional data (CS, information with attributes).

Each data source requires an information extraction process to obtain entities, relations, and attributes used for KG construction. Generally, the information extraction methods can be categorized into four classes: rule-based (R), statistics-based (S), dictionary-based (D), and machine learning-based (ML).

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1125-->

<!-- Media -->

<!-- figureText: Structured Entity KG Knowledge retrival Q&A Basic application KG embedding Classification Regression Machine learning Advanced application Application extraction Semi-structured Relation extraction Unstructured Attribute extraction Information Data extraction Construction -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_6.jpg?x=159&y=186&w=1211&h=532&r=0"/>

Fig. 3 General development pipeline of knowledge graph

Table 2 Different types of data

<table><tr><td>Data type</td><td>Time</td><td>Location</td><td>Trajectory</td></tr><tr><td>Time-series data</td><td>✓</td><td>✓</td><td>✓</td></tr><tr><td>Panel data</td><td>✓</td><td>✓</td><td/></tr><tr><td>Cross-sectional data</td><td/><td>✓</td><td/></tr></table>

<!-- Media -->

In the application stage, the KG takes inputs from the extracted information and represents them in triple (T) or quadruple (Q) forms. Applications can be divided into basic and advanced applications. Basic applications are driven by KG itself, such as knowledge visualization (KV), knowledge retrieval (KR), knowledge inference (KI), and question and answering (Q &A). Among them, knowledge inference refers to mining or inferring unknown/implicit semantic relations between entities based on existing facts/incomplete relations in KG.

Based on the constructed KG, entities and relations can be embedded into the continuous vector space through KG embedding methods to assist advanced machine learning applications (e.g., personalized recommendation, auxiliary decision-making, medical diagnosis, etc.). Machine learning applications can be categorized, according to the type of response (decision) variables, into classification (CL, predicting a discrete class label), regression (RE, predicting a continuous quantity), and trajectory planning (TP, a series of observations with time attributes).

Based on the above analysis, Table 3 summarizes selected domain KG studies using the above taxonomy, including research problems, domain, data type, KG form, information extraction, KG embedding, basic applications, and advanced applications. The review shows a wide span of application domains using KGs, but very few in transportation. Almost all studies have used triple forms with a few using quadruple forms, and all studies have allowed only a single directional relation between entities. Most studies construct KGs using cross-sectional data with no time attribute, or panel data with time attributes but no serial dependency. No study has been found on KGs capturing time-series data (i.e., order and dependencies) which is critical in urban mobility areas. As discussed before, the

<!-- Meanless: Springer-->




<!-- Meanless: 1126 Transportation (2025) 52:1119-1145 Springer-->

<!-- Meanless: 1993-2021 Q3-->

<!-- Media -->

Table 3 Selected knowledge graph studies

<table><tr><td>Paper</td><td>Research problems</td><td>Domain</td><td>Data type</td><td>Form</td><td>Information extraction</td><td>KG embedding</td><td>Basic applications</td><td>Advanced applica- tions</td></tr><tr><td>Li et al. (2020)</td><td>C+A</td><td>Medical</td><td>CS</td><td>Q</td><td>ML, R</td><td>PrTransH</td><td>KR</td><td>RE</td></tr><tr><td>Yu et al. (2017)</td><td>C+A</td><td>Medical</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KV, KR</td><td>NA</td></tr><tr><td>Shi et al. (2017)</td><td>C+A</td><td>Medical</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KV, KR, KI</td><td>NA</td></tr><tr><td>Mao et al. (2020)</td><td>C+A</td><td>Chemical</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>KV, KR</td><td>NA</td></tr><tr><td>Chen et al. (2019)</td><td>C+A</td><td>Agriculture</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>KR, Q &A</td><td>NA</td></tr><tr><td>Li et al. (2020)</td><td>C+A</td><td>E-commerce</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>Q &A</td><td>NA</td></tr><tr><td>Zhuang et al. (2017)</td><td>C+A</td><td>Urban</td><td>P</td><td>T</td><td>ML</td><td>Neural Network</td><td>NA</td><td>CL</td></tr><tr><td>Shan and Cao (2017)</td><td>C+A</td><td>Urban</td><td>P</td><td>T</td><td>S</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Szekely et al. (2015)</td><td>C+A</td><td>safety</td><td>CS</td><td>T</td><td>R</td><td>Deep CNN</td><td>KV, KR</td><td>NA</td></tr><tr><td>Jiang et al. (2021)</td><td>C+A</td><td>Construction</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KI, KR</td><td>NA</td></tr><tr><td>Cheng et al. (2019)</td><td>C+A</td><td>Risk and safety</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Yang and Liao (2022)</td><td>C+A</td><td>Risk and safety</td><td>P</td><td>Q</td><td>ML</td><td>LSTM</td><td>KI, Q &A</td><td>CL</td></tr><tr><td>Tang et al. (2019)</td><td>C+A</td><td>Power grid</td><td>CS</td><td>T</td><td>S, ML</td><td>NA</td><td>KV, KR</td><td>NA</td></tr><tr><td>Zhang et al. (2019)</td><td>C+A</td><td>Maritime</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KV, KR, KI</td><td>NA</td></tr><tr><td>Pourhabibi et al. (2020)</td><td>C</td><td>Medical</td><td>CS</td><td>T</td><td>D, ML</td><td>NA</td><td>KI</td><td>NA</td></tr><tr><td>Rotmensch et al. (2017)</td><td>C</td><td>Medical</td><td>CS</td><td>T</td><td>S</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Ernst et al. (2015)</td><td>C</td><td>Biomedical</td><td>CS</td><td>T</td><td>D</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Zhang et al. (2020)</td><td>C</td><td>Healthcare</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Li et al. (2020)</td><td>C</td><td>Medical</td><td>CS</td><td>T</td><td>R, ML</td><td>NA</td><td>KV, KR</td><td>NA</td></tr><tr><td>Tan et al. (2021)</td><td>C</td><td>Urban traffic</td><td>P</td><td>T</td><td>R</td><td>TransD</td><td>KR, KI</td><td>NA</td></tr><tr><td>Liu et al. (2021)</td><td>C</td><td>Railway</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KI</td><td>NA</td></tr><tr><td>M. Keller (2019)</td><td>C</td><td>Air traffic</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KV, KR</td><td>NA</td></tr><tr><td>Hao et al. (2021)</td><td>C</td><td>Engineering</td><td>CS</td><td>T</td><td>R, ML</td><td>TF-IDF</td><td>KV, KR</td><td>NA</td></tr><tr><td>Du et al. (2022)</td><td>C</td><td>geographic</td><td>CS</td><td>T</td><td>R, ML</td><td>NA</td><td>KR</td><td>NA</td></tr><tr><td>Haussmann et al. (2019)</td><td>C</td><td>Food</td><td>CS</td><td>T</td><td>R, ML</td><td>NA</td><td>Q &A</td><td>NA</td></tr></table>

<!-- Media -->

<!-- Meanless: HOROSHESSONSHING-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1127 Springer-->

<!-- Meanless: HOROORESSONSUNTIESTIES-->

<!-- Media -->

Table 3 (continued)

<table><tr><td>Paper</td><td>Research problems</td><td>Domain</td><td>Data type</td><td>Form</td><td>Information extraction</td><td>KG embedding</td><td>Basic applications</td><td>Advanced applica- tions</td></tr><tr><td>Xie et al. (2020)</td><td>C</td><td>LoT</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KR</td><td>NA</td></tr><tr><td>Chun et al. (2020)</td><td>C</td><td>Energy</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KR, KI</td><td>NA</td></tr><tr><td>Tang et al. (2019)</td><td>C</td><td>Power grid</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>KR, KI</td><td>NA</td></tr><tr><td>Hao et al. (2021)</td><td>C</td><td>Remote sensing</td><td>CS</td><td>T</td><td>R, ML</td><td>NA</td><td>KV, KI</td><td>NA</td></tr><tr><td>Ruan et al. (2016)</td><td>C</td><td>Financial</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KV, KR</td><td>NA</td></tr><tr><td>Elhammadi et al. (2020)</td><td>C</td><td>Financial</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Jia et al. (2018)</td><td>C</td><td>Cyber security</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>KI</td><td>NA</td></tr><tr><td>Chenglin et al. (2018)</td><td>C</td><td>Agriculture</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KV</td><td>NA</td></tr><tr><td>Dsouza et al. (2021)</td><td>C</td><td>Geographic</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KV, KR</td><td>NA</td></tr><tr><td>Berven et al. (2020)</td><td>C</td><td>Journalism</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>KV</td><td>CL</td></tr><tr><td>Chen et al. (2018)</td><td>C</td><td>Education</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Dang et al. (2019)</td><td>C</td><td>Education</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KR</td><td>NA</td></tr><tr><td>Chi et al. (2018)</td><td>C</td><td>Education</td><td>CS</td><td>T</td><td>D, ML</td><td>NA</td><td>KR,KV</td><td>NA</td></tr><tr><td>Carriero et al. (2019)</td><td>C</td><td>Education</td><td>CS</td><td>T</td><td>R</td><td>NA</td><td>KR</td><td>NA</td></tr><tr><td>Bean et al. (2017)</td><td>A</td><td>Medical</td><td>CS</td><td>T</td><td>NA</td><td>NA</td><td>NA</td><td>CL</td></tr><tr><td>Sang et al. (2018)</td><td>A</td><td>Medical</td><td>CS</td><td>T</td><td>D</td><td>SemaTyP</td><td>NA</td><td>CL</td></tr><tr><td>Shang et al. (2019)</td><td>A</td><td>Medical</td><td>CS</td><td>T</td><td>NA</td><td>Dual-RNN</td><td>NA</td><td>CL</td></tr><tr><td>Zhang et al. (2021)</td><td>A</td><td>Medical</td><td>CS</td><td>T</td><td>D</td><td>Word2Vec</td><td>NA</td><td>CL</td></tr><tr><td>Gong et al. (2021)</td><td>A</td><td>Medical</td><td>CS</td><td>T</td><td>NA</td><td>TransR-based</td><td>NA</td><td>CL</td></tr><tr><td>Zhou and Chen (2019)</td><td>A</td><td>Urban traffic</td><td>P</td><td>T</td><td>NA</td><td>GCN, CNN</td><td>NA</td><td>CL</td></tr><tr><td>Muppalla et al. (2017)</td><td>A</td><td>Urban traffic</td><td>P</td><td>T</td><td>R</td><td>NA</td><td>NA</td><td>CL</td></tr><tr><td>Liu et al. (2019)</td><td>A</td><td>Financial</td><td>P</td><td>T</td><td>NA</td><td>CNN</td><td>NA</td><td>CL</td></tr><tr><td>Deng et al. (2020)</td><td>A</td><td>Computer science</td><td>P</td><td>Q</td><td>NA</td><td>GCN</td><td>NA</td><td>CL</td></tr><tr><td>Chen et al. (2021)</td><td>A</td><td>Computer science</td><td>P</td><td>Q</td><td>NA</td><td>Dual GCN</td><td>NA</td><td>CL</td></tr></table>

<!-- Media -->

<!-- Meanless: 19,403,443,443,443,483 $\overrightarrow{B}$-->


<!-- Meanless: 2023-03 Q3-->

<!-- Media -->

Table 3 (continued)

<table><tr><td>Paper</td><td>Research problems</td><td>Domain</td><td>Data type</td><td>Form</td><td>Information extraction</td><td>KG embedding</td><td>Basic applications</td><td>Advanced applica- tions</td></tr><tr><td>Liao et al. (2021)</td><td>A</td><td>Computer science</td><td>P</td><td>Q</td><td>NA</td><td>TransE-based</td><td>NA</td><td>CL</td></tr><tr><td>Trivedi et al. (2017)</td><td>A</td><td>Computer science</td><td>P</td><td>Q</td><td>NA</td><td>Know-Evolve</td><td>KI</td><td>CL</td></tr><tr><td>Mezni (2021)</td><td>A</td><td>Computer science</td><td>P</td><td>Q</td><td>NA</td><td>CNN-based</td><td>NA</td><td>CL</td></tr><tr><td>Zhang et al. (2019)</td><td>A</td><td>Computer science</td><td>CS</td><td>T</td><td>ML</td><td>CNNs</td><td>NA</td><td>CL</td></tr><tr><td>Zhou et al. (2020)</td><td>A</td><td>Computer science</td><td>CS</td><td>T</td><td>NA</td><td>GCN,RGCN</td><td>NA</td><td>CL</td></tr><tr><td>Sha et al. (2021)</td><td>A</td><td>Computer science</td><td>CS</td><td>T</td><td>NA</td><td>HAKG</td><td>NA</td><td>CL</td></tr><tr><td>Wang et al. (2018)</td><td>A</td><td>Computer science</td><td>P</td><td>T</td><td>NA</td><td>RippleNet</td><td>NA</td><td>CL</td></tr><tr><td>Fang et al. (2020)</td><td>A</td><td>Computer science</td><td>CS</td><td>T</td><td>ML</td><td>NA</td><td>NA</td><td>CL</td></tr><tr><td>Zhou et al. (2020)</td><td>A</td><td>Computer science</td><td>CS</td><td>T</td><td>NA</td><td>GCN, RNN</td><td>NA</td><td>CL</td></tr><tr><td>Cao et al. (2019)</td><td>A</td><td>Computer science</td><td>CS</td><td>T</td><td>NA</td><td>TransH</td><td>NA</td><td>CL</td></tr></table>

C+A, Construction and application; C, Construction; A, Application; P, Panel data; CS, Cross-sectional data; T, Triple; Q, Quadruple; R, Rule-based; S, Statistics-based; D, Dictionary-based; ML, Machine learning-based; KV, Knowledge visualization; KR, Knowledge retrieval; KI, Knowledge inference; Q &A, Question and answering; CL, Classification; RE, Regression; NA, Not available

<!-- Media -->

<!-- Meanless: 一つことですございて、「ここで」ニーク-->

<!-- Meanless: 1128 Transportation (2025) 52:1119-1145-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1129-->

single directional relation triple form may limit KG's capability to fully model mobility problems, such as probabilistic activities between two stations.

For information extraction, most studies used rule-based or machine learning methods depending on data types. The KG embedding learns a low-dimensional representation of entities and relations, which could be roughly divided into distance-based models (e.g., TransD, TransE), semantic models (e.g., SemaTyp), and neural network-based models (e.g., CNN, GCN). The advanced applications cover both classification and regression problems, but the number of applications in classification is overwhelming, while no study was reported on trajectory planning problems (predicting a series of values).

## Critical analysis of KG in transportation

While our literature review provides a comprehensive survey of existing KG construction and applications, it is imperative to delve deeper into the nuances and intricacies that could inform the development of the MKG. To this end, we critically analyze the literature to extract key elements and lessons that could be transposed to enhance the KG applied in transportation area.

1. Form and directionality constraints Conventional KGs typically employ triple forms and restrict entities to singular, unidirectional relationships. This approach may not suffice for the transportation domain, where entities often have complex, bidirectional interactions. For instance, the same pair of locations could be linked by different types of trips, like commuting in the morning and returning in the evening, each with its own distinct characteristics and implications for transport planning.

2. Dynamics of mobility Standard KGs often have static structures that fail to reflect the fluid nature of transportation systems, where the significance of connections between locations can shift according to temporal patterns, such as rush hours, weekends, or seasonal variations, as well as due to individual user preferences and behaviors. Capturing these dynamics is crucial for accurate modeling and forecasting in urban transport systems.

3. Multidimensional relations The multifaceted nature of transportation necessitates KGs that can encapsulate the diverse range of human activities occurring between the same origin and destination within specific time frames. For example, a single journey may encompass multiple purposes-commuting, shopping, leisure-that are not mutually exclusive. This complexity is particularly pronounced during peak hours when the confluence of activities is at its highest. A more nuanced, multidimensional approach to KGs could provide a richer, more accurate representation of such intricate human mobility patterns.

4. Temporal data handling Existing KGs lack the capability to handle time-series data, a critical feature for accurately reflecting the ever-changing landscape of urban mobility. To truly capture the temporal dynamics of transportation-such as peak travel times, seasonal variations, and event-driven traffic fluctuations-KGs need to evolve to process and analyze data that is inherently sequential and time-dependent.

5. Data integration KGs in transportation should not only integrate data from various sources (e.g., traffic sensors, smart cards, GPS traces) but also reconcile the disparate temporal scales and spatial granularities. Integrating high-frequency GPS data with lower-frequency transit records, and matching precise GPS locations with broader transport zones, is crucial for a nuanced view of travel behaviors and advanced transport system planning.

<!-- Meanless: Springer-->




<!-- Meanless: 1130 Transportation (2025) 52:1119-1145-->

6. Applications The literature shows a preponderance of KGs in basic applications like knowledge retrieval and inference. However, advanced applications such as personalized recommendations and decision support systems are less explored in transportation. Moreover, there is a notable gap in KG applications for trajectory planning.

In summary, while the literature lays a foundational understanding of KGs, it also underscores the limitations of traditional KGs and the gaps that must be addressed for their effective application in transportation. Our proposed MKG framework is designed to address these critical elements, thereby enhancing knowledge representation and management within the transportation domain.

## Methodology

## Problem definition

Following the reviewed KG definitions in Table 1, we define the mobility knowledge graph (MKG) as a time-based knowledge graph, which is composed of sub-graphs for different time intervals. Each sub-graph is a quadruple form of $\langle$ location,relation,location,time period $\rangle$ composed of nodes,edges,and properties,in which nodes represent locations and edges represent the relations (e.g., travel activity) between locations during a certain time period. For example, (location A, work, location B, 07:30-09:30) indicates that travels between locations A and B during the time 07:30-09:30 are mostly likely for work activities.

We define an individual mobility trajectory as a set of trips $\operatorname{Tr} = \left\{  {t{r}_{1},t{r}_{2},t{r}_{3},\ldots }\right\}$ ,with each trip tr consisting of \{origin location, start time, destination location, arrival time\}. The MKG construction problem is:

Given the individual mobility trajectories Tr,extract the hidden relations $\mathbf{R}$ between locations $\mathbf{V}$ capturing spatiotemporal correlations of travels during time period $p$ and construct the mobility knowledge graph $\mathbf{G}\left( {\mathbf{V},\mathbf{R},p}\right)$ in a form of $<$ location,relation, location, time period $>$ .

Figure 4 shows the framework of MKG construction from mobility data. The input of the framework is the individual mobility trajectories, and the output is the mobility knowledge graph $\mathbf{G}$ . The construction contains two core parts: stations’ latent representation and station-station relations extraction. To generate these, we construct the temporal station demand matrix $\mathbf{T}$ and OD (origin-destination) flow matrix $\mathbf{S}$ from individual mobility trajectories, then extract the temporal and spatial information, respectively. It's important to emphasize that our study focuses on constructing the MKG under the current stable system state, without considering the automatic updating of the MKG to reflect operational changes or network modifications.

## MKG construction in public transport

For the MKG in public transport, entities could be stations, city grid cells, and points-of-interest, and relations are travel activities such as shopping, working, and school. In practice, the activity (relationship) between an OD pair could vary for different time periods. Therefore, we develop a set of sub-graphs corresponding to different times, such as morning and afternoon peaks. Given the requirement of the single directional relationship between entities in KG, we define the relation as the most likely travel activity between stations. Other relation definitions could also be adopted, resulting in a set of sub-graphs pertaining to different applications, such as the least likely activity between stations.

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1131-->

<!-- Media -->

<!-- figureText: Temporal station OD flow matrix $\mathbf{S}$ Spatial information Output: Application Mobility knowledge graph $\mathbf{G}$ (Case study ) demand matrix $\mathbf{T}$ Temporal Input: information Individual mobility trajectory Stations' latent Relation representation extraction MKG Construction -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_12.jpg?x=161&y=193&w=1212&h=461&r=0"/>

Fig. 4 Framework for MKG construction from mobility data

<!-- Media -->

MKG construction in public transport consists of two key parts: entity extraction and relation extraction. Entity extraction refers to extracting different station entities (including subway stations, train stations, or bus stops) from mobility data. Unlike GPS trajectory data, passengers' boarding and alighting stations are usually recorded in the smart card data. The relation represents the spatiotemporal travel pattern correlations between two stations within a certain period. Since it cannot be observed directly from the trajectory data, the objective of relation extraction is to extract the implicit relation between the origin and destination stations. Therefore, to obtain the implicit station-station relations, stations also should be described as the latent representation and all variables in this study are calculated in the latent space.

## Stations’ latent representation

For each station,we construct the station’s latent vector $\mathbf{v} = \left\lbrack  {{\mathbf{v}}^{t};{\mathbf{v}}^{s}}\right\rbrack$ capturing spatiotemporal characteristics of station demand patterns,where ${\mathbf{v}}^{t}$ and ${\mathbf{v}}^{s}$ are the station’s temporal and spatial latent vectors, respectively. The travel characteristics of each station are time-varying. For example, the number of visitors at a station may be quite different between peak and off-peak hours. Therefore, it is important to extract the visiting features of stations based on time.

We first select the time period $p$ (e.g.,weekdays of a specific week),then construct the temporal station demand matrix $\mathbf{T} \in  {\mathbb{R}}^{n \times  a}$ ,where $n$ is the number of stations in the system and $a$ is the number of hours within time period $p$ . An element ${T}_{ij}$ in matrix $\mathbf{T}$ represents the number of visiting to $i - {th}$ station in the $j - {th}$ hour. According to the Nonnegative Matrix Factorization (NMF) theory (Lee and Seung 2000),the non-negative matrix $\mathbf{T}$ can be decomposed into two non-negative matrices, which is utilized to extract the visiting feature of each station. The matrix $\mathbf{T}$ can be decomposed into:

$$
\mathbf{T} \approx  {\mathbf{V}}^{t}\mathbf{Q} \tag{1}
$$

<!-- Meanless: Springer-->




<!-- Meanless: 1132 Transportation (2025) 52:1119-1145-->

where matrix ${\mathbf{V}}^{t} \in  {\mathbb{R}}^{n \times  {k}_{t}}$ is the stations’ temporal latent representation, $\mathbf{Q} \in  {\mathbb{R}}^{{k}_{t} \times  a}$ is the coefficient matrix and ${k}_{t}$ is the number of stations’ temporal latent features.

To obtain the spatial features between OD pairs,the OD flow matrix $\mathbf{S} \in  {\mathbb{R}}^{n \times  n}$ is constructed,in which an element ${S}_{od}$ in matrix $\mathbf{S}$ represents the number of visiting (normalized value) from origin to destination station. Given the OD flow matrix $\mathbf{S}$ ,through square matrix factorization (Klema and Laub 1980), it can be decomposed into:

$$
\mathbf{S} \approx  {\mathbf{V}}^{S}\mathbf{D}{\mathbf{V}}^{sT} \tag{2}
$$

where matrix ${\mathbf{V}}^{s} \in  {\mathbb{R}}^{n \times  {k}_{s}}$ is the stations’ spatial related latent representation; ${\mathbf{V}}^{{s}^{T}}$ is the transpose of ${\mathbf{V}}^{s};\mathbf{D} \in  {\mathbb{R}}^{{k}_{s} \times  {k}_{s}}$ is the feature diagonal matrix and ${k}_{s}$ is the number of spatial latent features. The OD flow matrix $\mathbf{S}$ describes the spatial correlation (dependencies) between stations, which can be regarded as the embedding of the system's topology. Similarly,the matrices ${\mathbf{V}}^{s}$ and $\mathbf{D}$ are the stations’ embedding and the interactions in the latent space, respectively.

Combining Eqs. (1) and (2),the matrices ${\mathbf{V}}^{t},{\mathbf{V}}^{s},\mathbf{Q}$ and $\mathbf{D}$ can be learned by solving the following optimization problem:

$$
{Obj}_{1} = \mathop{\min }\limits_{{{\mathbf{V}}^{\prime },{\mathbf{V}}^{s},\mathbf{Q},\mathbf{D} \geq  0}}{\begin{Vmatrix}\mathbf{S} - {\mathbf{V}}^{s}\mathbf{D}{\mathbf{V}}^{sT}\end{Vmatrix}}^{2} + {\begin{Vmatrix}\mathbf{T} - {\mathbf{V}}^{t}\mathbf{Q}\end{Vmatrix}}^{2} + \lambda \left\lbrack  {{\begin{Vmatrix}{\mathbf{V}}^{t}\end{Vmatrix}}^{2} + {\begin{Vmatrix}{\mathbf{V}}^{s}\end{Vmatrix}}^{2} + \parallel \mathbf{Q}{\parallel }^{2} + \parallel \mathbf{D}{\parallel }^{2}}\right\rbrack  
$$

(3)

where $\parallel  \cdot  \parallel$ denotes the Frobenius norm; $\lambda$ is the regularization rate. The first and second term captures the spatial and temporal latent patterns, respectively. The last term is the regularization for penalizing the norm of ${\mathbf{V}}^{t},{\mathbf{V}}^{s},\mathbf{Q}$ and $\mathbf{D}$ .

By solving Eq. (3),the stations’ temporal and spatial related latent matrices ${\mathbf{V}}^{t}$ and ${\mathbf{V}}^{s}$ are extracted,and the stations’ temporal and spatial latent vectors ${\mathbf{v}}^{t}$ and ${\mathbf{v}}^{s}$ are obtained. After this step,the stations’ temporal and spatial related latent representation $\mathbf{V} = \left\lbrack  {{\mathbf{V}}^{t};{\mathbf{V}}^{s}}\right\rbrack$ is constructed.

## Relation extraction

Relation extraction for KGs is an extensive and profound research topic and most studies focus on supervised learning methods (Smirnova and Cudré-Mauroux 2018; Nayak et al. 2021; Wang et al. 2022; Liu 2020). However, unsupervised learning methods are more suitable for our research problem since the edges in MKG do not have any semantic labels. Here we introduce two approaches to extract 'hidden' directional relations between stations.

Rule-based relation extraction The relation between the two stations describes the specific travel pattern of these two stations under a certain time period. Therefore, it can be regarded as a constraint on these two stations. To distinguish the relation between different stations and the relation between the same two stations under different time periods, a simple way is to represent the relation as a concatenation of the temporal and spatial features of the two stations.

Figure 5 shows the rule-based relation extraction framework. In the rule-based model, the directional relationship between two stations is formed by concatenating the temporal feature of the origin station and the spatial feature of the destination station, that is, ${\mathbf{r}}_{od} = \left\lbrack  {{\mathbf{v}}_{o}^{t};{\mathbf{v}}_{d}^{s}}\right\rbrack$ ,where ${\mathbf{r}}_{od}$ is the latent vector of relation, ${\mathbf{v}}_{o}^{t}$ the temporal latent vector of origin station,and ${\mathbf{v}}_{d}^{s}$ the spatial latent vector of destination station. For the example in Fig. 5, we have the origin stations set and destination stations set, and the latent representation of both is matrix $\mathbf{V} = \left\lbrack  {{\mathbf{v}}_{1},{\mathbf{v}}_{2},{\mathbf{v}}_{3},\ldots ,{\mathbf{v}}_{n}}\right\rbrack$ . For station vector ${\mathbf{v}}_{i}$ ,it consists of the temporal latent vector ${\mathbf{v}}_{i}^{t}$ and spatial latent vector ${\mathbf{v}}_{i}^{s}$ with a dimension of $1 \times  5$ ,whose values are colored in orange and green,respectively. For a selected OD pair ${\mathbf{v}}_{o}$ and ${\mathbf{v}}_{d}$ ,the directional relation ${\mathbf{r}}_{od}$ is obtained by concatenating the temporal feature of the origin station (light orange) and the spatial feature of the destination station (dark green).

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1133-->

<!-- Media -->

<!-- figureText: Origin station set Destination station set ${v}_{l}^{\prime }$ ${v}_{2}^{s}$ ${v}_{n}$ ${v}_{n}^{s}$ ${v}_{l}$ ${v}_{l}^{t}$ ${v}_{l}^{s}$ ${v}_{2}$ ${v}_{2}^{s}$ ${v}_{3}^{t}$ ${V}_{n}$ ${v}_{n}{}^{t}$ ${v}_{n}^{s}$ _____ -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_14.jpg?x=156&y=183&w=1220&h=743&r=0"/>

Fig. 5 Rule-based relation extraction

<!-- Media -->

By solving Eq. (3),the stations’ temporal and spatial related latent matrices ${\mathbf{V}}^{t}$ and ${\mathbf{V}}^{s}$ are extracted and the stations’ temporal and spatial latent vectors ${\mathbf{v}}^{t}$ and ${\mathbf{v}}^{s}$ are also obtained. Thus, the relation between stations is obtained.

After learning all relations,a clustering algorithm,such as k-means,may be used to classify all candidate relations. A cluster represents a kind of relation that may be mapped to a semantic space understandable by humans (illustrated in Fig. 8 in the Case Study Section). However, the relations between multiple origins and one destination most likely will be divided into different clusters. That is to say, within a certain time interval, the relations between different origin stations and one destination are different. These may cause inconsistent relations in MKG as these edges share the same activity in the real world. Therefore, this method is more suitable for extracting 1-to-1 relations. The rule-based method has difficulty obtaining relations of multiple origins to one destination (N-to-1 relation), and the relation of one origin to multiple destinations (1-to-N relation).

## Neural network (NN)-based relation extraction

There are also nonlinear methods for matrix decomposition, such as neural networks (Zhuang et al. 2017; Dziugaite and Roy 2015). They can extract latent representations of directional relations simultaneously capturing spatiotemporal travel patterns of OD pairs (rather than arbitrarily concatenating spatial and temporal patterns). This paper develops a relation extraction method based on the neural network (NN) model used in (Zhuang et al. 2017), to simultaneously extract the spatiotemporal latent representation of stations and relations.

<!-- Meanless: Springer-->




<!-- Meanless: 1134 Transportation (2025) 52:1119-1145-->

In the OD flow matrix $\mathbf{S}$ ,each entry ${s}_{od}$ records the passenger flow from the origin station to the destination station, and its value is determined by the relation between these two stations. Therefore,the relation can be extracted from the entry ${S}_{od}$ . Moreover, to avoid the limitations of the previous method, the stations' and relations' spatiotemporal latent representation are extracted simultaneously and are defined as ${\mathbf{V}}^{ts} \in  {\mathbb{R}}^{n \times  {k}_{ts}}$ and ${\mathbf{R}}^{ts} \in  {\mathbb{R}}^{m \times  {k}_{r}}$ ,respectively,where $n$ and $m$ are the numbers of stations and relations in the network; ${k}_{ts}$ and ${k}_{r}$ are the number of latent features of stations and relations. Therefore,the objective of the relation extraction is to map $\left( {{\mathbf{v}}_{o},{\mathbf{r}}_{od},{\mathbf{v}}_{d}}\right)$ to the nonzero entry ${S}_{od}$ .

The relation extraction problem is defined as: Given a training set $\left\{  {\left( {\left\lbrack  {{\mathbf{v}}_{1};{\mathbf{r}}_{12};{\mathbf{v}}_{2}}\right\rbrack  ,{s}_{12}}\right) ,\left( {\left\lbrack  {{\mathbf{v}}_{1};{\mathbf{r}}_{13};{\mathbf{v}}_{3}}\right\rbrack  ,{s}_{13}}\right) ,\cdots ,\left( {\left\lbrack  {{\mathbf{v}}_{n};{\mathbf{r}}_{n\left( {n - 1}\right) };{\mathbf{v}}_{n - 1}}\right\rbrack  ,{s}_{n\left( {n - 1}\right) }}\right) }\right\}$ ,for each input vector $\mathbf{x} = \left\lbrack  {{\mathbf{v}}_{o};{r}_{od};{\mathbf{v}}_{d}}\right\rbrack   \in  \mathbf{X}$ and corresponding output value ${S}_{od} \in  \mathbf{S}$ ,the goal is to learn a function $f : X \rightarrow  S$ mapping inputs to outputs. For each input vector $x$ ,the feed-forward NN-based ${f}_{NN}\left( x\right)$ is defined as:

$$
{f}_{NN}\left( \mathbf{x}\right)  = {\mathbf{W}}_{2}\operatorname{Sigmoid}\left( {\left( {\mathbf{{xW}}}_{1}\right) }^{T}\right)  \tag{4}
$$

where matrix ${\mathbf{W}}_{1} \in  {\mathbb{R}}^{\left( {2{k}_{ts} + {k}_{r}}\right)  \times  w}$ and ${\mathbf{W}}_{2} \in  {\mathbb{R}}^{1 \times  w}$ represent the weights of the first layers and second layers; $w$ is the number of hidden neurons and Sigmoid(   ) is the activation function. To specify a relation ${\mathbf{r}}_{od}$ in each quadruple $\left( {{\mathbf{v}}_{o},{\mathbf{r}}_{od},{\mathbf{v}}_{d},p}\right)$ ,a latent indexing vector $\mathbf{h} \in  {\mathbb{R}}^{1 \times  m}$ is introduced,and the specific latent relation is ${\mathbf{r}}_{od} = \mathbf{h}{\mathbf{R}}^{ts}$ . Therefore,the input vector $\mathbf{x}$ can be represent as $\mathbf{x} = \left\lbrack  {{\mathbf{v}}_{o};{\mathbf{{hR}}}^{ts};{\mathbf{v}}_{d}}\right\rbrack   \in  {\mathbb{R}}^{1 \times  \left( {2{k}_{ts} + {k}_{r}}\right) }$ ,which construct by concatenating the origin station’s latent vector ${\mathbf{v}}_{o}$ ,the relationship’s latent vector ${\mathbf{r}}_{od}$ ,and the destination station’s latent vector ${\mathbf{v}}_{d}$ horizontally.

By considering both temporal and spatial features, i.e., Eqs. (1) and (4), the stations’ latent representation ${\mathbf{V}}^{ts}$ ,and relation ${\mathbf{R}}^{ts}$ can be learned by minimizing the following objective function:

$$
{Obj}_{2} = \mathop{\min }\limits_{{{\mathbf{V}}^{s},{\mathbf{R}}^{s},\mathbf{H},\mathbf{Q} \geq  0}}\mathop{\sum }\limits_{{\forall \left( {{\mathbf{v}}_{o},{\mathbf{r}}_{od},{\mathbf{v}}_{d}}\right)  \in  \mathbf{S}}}{\left( {S}_{od} - {f}_{NN}\left( \mathbf{x}\right) \right) }^{2} + {\begin{Vmatrix}\mathbf{T} - {\mathbf{V}}^{ts}\mathbf{Q}\end{Vmatrix}}^{2} \tag{5}
$$

$$
 + \lambda \left\lbrack  {{\begin{Vmatrix}{\mathbf{V}}^{ts}\end{Vmatrix}}^{2} + \parallel \mathbf{h}{\parallel }^{2} + {\begin{Vmatrix}{\mathbf{R}}^{ts}\end{Vmatrix}}^{2} + \parallel \mathbf{Q}{\parallel }^{2}}\right\rbrack  
$$

where the stations’ latent spatiotemporal representation ${\mathbf{V}}^{ts}$ is shared in the first and second terms and constrained by the first and second terms simultaneously. The parameter $\lambda$ is the regularization rate. The last term is the regularization for penalizing the norm of ${\mathbf{V}}^{ts},{\mathbf{R}}^{ts}$ , $\mathbf{Q}$ ,and $\mathbf{h}$ .

By solving Eq. (5),the hidden relations ${\mathbf{R}}^{ts}$ are extracted. Compared to the rule-based relation extraction, the NN-based relation extraction can simultaneously learn the temporal and spatial features of stations, thus theoretically achieving a better performance. Mathematically, the two optimization problems in Eqs. (3) and (5) are both matrix decomposition problems, though with different objectives and decision variables. We develop an iterative relation extraction algorithm based on the gradient descent algorithm to solve these problems. To illustrate the algorithm, we use Eq. (5) as an example and present the algorithm pseudo-code in Algorithm 1. Each element in the OD flow matrix is iterated over once to extract relationships, resulting in a computational complexity of $\mathrm{O}\left( {n}^{2}\right)$ ,where $n$ is the number of stations.

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1135-->

<!-- Media -->

Input: the time dependent demand matrix $T$ ,the spatial transfer matrix $S$ ,

---

								learning rate $\alpha$ ,maximum iteration $n$ ,regularization rate $\lambda$ ,
								convergence error $\varepsilon$
		Output: latent variables ${V}^{ts},{R}^{ts},h,Q$
1 Randomly initialize latent variables ${V}^{ts},{R}^{ts},h,Q,{W}_{1},{W}_{2}$ in range of(0,1)
			Compute ${\operatorname{cost}}_{0} = {Ob}{j}_{2}$
			for $i = 1$ to $n$ do
					compute ${\operatorname{cost}}_{i} = {Ob}{j}_{2}$
						for each latent variable $j$ in $\left\lbrack  {{V}^{ts},{R}^{ts},h,Q}\right\rbrack$ do
								compute each latent variable’s gradient $\nabla j = \frac{\partial \left( {{Ob}{j}_{2}}\right) }{\partial j}$ on the training
									set $T,S$ ,respectively
									update each variable ${j}_{i + 1} = {j}_{i} - \alpha  \cdot  \nabla j$
									update ${\operatorname{cost}}_{i} = {Ob}{j}_{2}$
					end
					if $\left| \frac{{\cos }_{i} - \cos {t}_{i - 1}}{{\cos }_{i - 1}}\right|  \leq  \varepsilon$ then
								break
					end
		end
		return latent variables ${V}^{ts},{R}^{ts},h,Q$

---

Algorithm 1: Relation extraction algorithm

<!-- Media -->

## Case study

## Experiment setting

To validate the model performance and explore the value of the knowledge graph in mobility, we design an experiment to predict trip destinations given information of trip origins, trip times, and historical trip activity distribution (from MKG) of individuals. Smart card data from 90 stations for the urban railway system in Hong Kong from January 1st to March 31st, 2018 are used. The smart card data contains both tap-in and tap-out stations and times. The MKG is trained using data from January 1st to February 28th, 2018. The trained MKG is used to generate individual trip activity distribution and constrain the list of candidate stations in predicting individual trip destinations in March 2018.

The latent variables ${\mathbf{V}}^{t},{\mathbf{V}}^{s},{\mathbf{V}}^{ts},{\mathbf{R}}^{ts},\mathbf{D},\mathbf{h},\mathbf{Q}$ in Eqs. (3) and (5) are estimated by Algorithm 1. For the selection of optimal hyper-parameters, we employed a grid search strategy. The hyper-parameters were varied within the following ranges: the number of latent features ${k}_{t},{k}_{s},{k}_{ts},{k}_{r} \in  \{ 5,{10},{15},{20}\}$ ,the number of hidden neurons $w \in  \{ {10},{20},{30}\}$ ,learning rate $\alpha  \in  \{ {0.1},{0.01},{0.001},{0.0001},{0.00001}\}$ ,regularization term $\lambda  \in  \{ {0.1},{0.01},{0.001}\}$ , and convergence error $\varepsilon  \in  \{ {0.1},{0.01},{0.001}\}$ . The optimal hyper-parameters were determined to be ${k}_{t} = 5,{k}_{s} = 5,{k}_{ts} = {10},{k}_{r} = {10},w = {20},\alpha  = {1e} - 5,\lambda  = {0.01}$ ,and $\varepsilon  = {0.01}$ . The training of the MKG was performed on a standard laptop equipped with an AMD Ryzen 7 PRO 4750U processor with Radeon Graphics,clocked at 1.70 GHz, and 16 GB of RAM. Our model and associated experiments were implemented using Python version 2.7 on a Microsoft Windows 10 platform, with the PyCharm IDE version 2020.1 facilitating development.

<!-- Meanless: Springer-->




<!-- Meanless: 1136 Transportation (2025) 52:1119-1145-->

In the rule-based relation extraction, after extracting each OD pair relation, the k-means clustering algorithm is used to cluster the relation types. The number of clusters in $\mathrm{k}$ -means is set as the number of relations in ${R}^{ts}$ extracted by the NN-based relation extraction method.

We use Accuracy@TopM as a performance measure, which is defined as follows:

$$
\text{Accuracy@Top}M = \frac{m}{N} \tag{6}
$$

where $m$ is the number of trips with the real destination in the Top $M \in  \mathbb{N}$ prediction results and $N$ is the total number of trips. For example,suppose there are 1000 trips in total. For each trip,a candidate destination stations list $\left\{  {{d}_{1},{d}_{2},{d}_{3},\ldots }\right\}$ with corresponding likelihood $\left\{  {{l}_{1},{l}_{2},{l}_{3},\ldots }\right\}$ . For $M = 1,m$ is the number of trips whose top 1 candidate set contains the ’real’ destination station. For $M = 2$ ,assuming that the number of trips whose top 2 candidate set contains the 'real' destination station is 800 , then the Accuracy@ Top $M = {0.8}$ .

In the experiment, we test both morning peak and off-peak trip destination predictions by training the MKG and testing trips in the corresponding periods. We develop three destination prediction models for comparison.

1. Stat_Group It is a statistical model based on user groups. It predicts the trip destination stations based on the ranked list of candidate stations characterized by the trip OD transition probability of a group. The user group is clustered based on user travel features including home station, work station, average daily travel frequency, and the number of visiting stations.

2. MKG_Rule It predicts the trip destination stations based on the probability of candidate destination stations. It is the probability of activity times the conditional probability of the destination station given the activity. The activity distribution is generated from MKG trained using the rule-based relation extraction method.

3. MKG_NN It uses the same destination prediction process as the MKG_Rule method but uses the MKG trained using the NN-based relation extraction.

The objective is to utilize the trained MKG, taking into account the user's departure time, origin station, and individual historical activities, to infer the user's likely destination. Initially, based on the departure time, origin, and historical activities, we determine a set of candidate destinations and calculate their conditional probabilities based on these activities. Subsequently, the MKG assesses activity distributions linked to the origin station. This information is then employed to refine and update the probabilities of each candidate destination, effectively narrowing down the options and ranking them based on their likelihood. This process enhances the accuracy of predicting the user's intended destination.

To further compare the MKG model performance, we calculate the upper bound of the prediction performance which predicts the trip destination stations based on OD transition probabilities calibrated from historical trips of individuals. All models above aim to capture station relations by reconstructing aggregated travel patterns. For individuals, their travel patterns (activities) can be obtained from their historical travel OD pairs. To predict an individual's trip destination, the best performance is basically the statistical distribution of the individual's destinations. Thus, the individual OD transition probability is used as the upper bound prediction performance.

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1137-->

## Results

Figure 6 shows the model comparisons with the number of relations $R = {30}$ during morning peak and off-peak. In general, incorporating MKG significantly improves prediction performance over the Stat_Group model for both peak and off-peak periods. MKG_NN performance is close to the upper bound performance. This has an important implication for trip destination prediction (and also for destination inference) for public transport fare systems with no alighting provision needed. In addition, MKG_NN performs better than the MKG_Rule model since it captures the complex spatiotemporal information simultaneously. Compared to the morning peak, the prediction performance in off-peak is worse for all methods, since the off-peak activities are more diverse and challenging to predict. Stat_Group performs the worst because the candidate stations aggregate a large number of irrelevant stations (noisy data) visited by similar users.

Currently, the primary method for trip destination inference in public transport is the trip chaining model (Liu et al. 2020; Lei et al. 2021; Wang et al. 2011; Jin et al. 2022; Sánchez-Martínez 2017). This approach infers the destination of a smart card transaction using rule-based methods with pre-defined or calibrated threshold values. Since automated fare collection systems record passengers' boarding information without alighting information, the data of the true destinations was unavailable for validation. Therefore, instead of direct validation, most researchers set an inference rate that corresponds to the proportion of entry-only trips that met several rules they established to infer destinations. In other words, they specified several matching rules, and if a candidate destination satisfies the rules, it is regarded as a potential destination. On the other hand, some studies have validated their method using unique smart card datasets (including travelers' boarding and alighting details) with an accuracy between 60 and 75%, which are significantly lower than our prediction performance (Fig. 6a) in the morning peak (Trépanier et al. 2007; Alsger et al. 2016; Jung and Sohn 2017; Assemi et al. 2020). In addition, a few studies have validated and achieved relatively good results (about ${80}\%$ ) using survey data (Barry et al. 2002; Dou et al. 2007; Muni-zaga et al. 2014). However, the sample size of such data sets is small and their results are difficult to generalize. Also, the trip-chaining model requires calibrating or defining a fair amount of threshold parameters, which is usually difficult and time-consuming. Our MKG-NN-based approach can achieve a better performance than benchmark models and close to the theoretical upper performance bound. Importantly, it is purely data-driven which lends its capability for practical generalization and implementation in different cities.

<!-- Media -->

<!-- figureText: 1 0.7 0.6 0.5 Accuracy 0.4 0.3 - Upper bound Stat_Group MKG_Rule MKG_NN 1 2 4 $M$ (b) Off peak, $\mathrm{R} = {30}$ 0.9 0.8 0.7 Accuracy 0.6 0.5 0.4 - Upper bound Stat_Group 0.3 MKG_NN 0.2 (a) Morning peak, $\mathrm{R} = {30}$ -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_18.jpg?x=162&y=1673&w=1211&h=434&r=0"/>

Fig. 6 Performance comparison with varying Accuracy@TopM (M=1, 2, 3, 4, 5)

<!-- Media -->

<!-- Meanless: Springer-->




<!-- Meanless: 1138 Transportation (2025) 52:1119-1145-->

The number of relations impacts the MKG performance in predicting the trip destination. Taking the morning peak and $M = 1$ as an example,we test different numbers of relations from 10 to 60 with a step of 10 . Figure 7 shows the sensitivity analysis with respect to the number of relations in MKG (morning peak, Top1). It shows an increasing trend with a stable performance after the number of relations is 30 .

## Semantic relations mapping

Translating the latent relations uncovered by the Mobility Knowledge Graph (MKG) into semantic, human-understandable terms is crucial for the practical application of our findings. The inherent challenge lies in the unsupervised nature of MKG construction, which does not inherently provide semantic meaning to the relations it discovers. To tackle this, we have developed a qualitative approach for semantic mapping, as illustrated in Fig. 8.

Our approach begins by considering a set of predefined semantic relations, such as 'work', 'school', and 'other'. These categories are informed by typical urban mobility patterns and are chosen for their relevance to the majority of commuter flows. The MKG, constructed using a neural network-based method, identifies numerical relations that are indicative of movement patterns between stations. These numerical relations are initially agnostic of semantic meaning and are denoted as ${r}_{1},{r}_{2}$ ,and ${r}_{3}$ . Each relation is associated with a set of MKG edges, as depicted in Fig. 8(1).

To systematically map these numerical relations to our predefined semantic categories, we leverage auxiliary data sources that provide context about the main activities occurring between certain stations. For instance, household travel surveys can reveal that the predominant movement between stations $\mathrm{A}$ and $\mathrm{C}$ is for work purposes,while the flow between stations $\mathrm{B}$ and $\mathrm{F}$ is primarily for school commuting. This contextual information is applied to the corresponding edges within the MKG, as shown in Fig. 8(2).

The next step involves a systematic matching process. By comparing the patterns of the numerical MKG relations from Fig. 8(1) with the activity-based semantic relations from Fig. 8(2),we can deduce a mapping: ${r}_{1}$ corresponds to ’work’, ${r}_{2}$ to ’school’,and ${r}_{3}$ to ’other’. This mapping process is depicted in Fig. 8(3).

<!-- Media -->

Fig. 7 Performance under differ-

<!-- figureText: MKG_Rule MKG_NN 40 50 60 Number of relations 0.9 0.8 Accuracy@Top1 0.7 0.6 0.5 0.4 10 20 30 -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_19.jpg?x=567&y=1695&w=816&h=477&r=0"/>

ent number of relations during morning peak

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1139-->

<!-- figureText: B B A household travel survey data nor C D others E (2) ${\mathrm{r}}_{1}$ : work ${\mathrm{r}}_{2}$ : school update ${\mathrm{r}}_{3}$ : others (3) A D E (1) others A S.Iә410- D others (4) -->

<img src="https://cdn.noedgeai.com/bo_d2u6goref24c73b31eog_20.jpg?x=154&y=188&w=1222&h=1023&r=0"/>

Fig. 8 Numerical and semantical relations mapping

<!-- Media -->

Finally, with the mappings established, we update the complete MKG to reflect these semantic relations, resulting in a graph that not only represents the flow of commuters but also the purpose of their journeys. This enriched MKG is presented in Fig. 8(4). This systematic approach to semantic mapping not only enhances the interpretability of the MKG but also its practical utility, as it allows stakeholders to understand and address the specific needs and behaviors associated with different types of commuter flows.

Additionally, other types of data can also be utilized to enrich semantic relationships mapping, such as analysing the distribution of various points of interest (POIs) around origin-destination stations and the popularity of these POIs during certain time periods, information which can be sourced from platforms like Google Maps.

## Discussion and conclusion

The knowledge graph is a graph-based knowledge representation and organization method, which is composed of nodes (entities) and edges (relations). It has been widely and successfully applied in many areas. However, the application of knowledge graphs in urban mobility is so far limited given the lack of direct knowledge recorded in the mobility data and time-dependent relationships. The paper introduces the concept of mobility knowledge graph by reviewing existing KG studies and synthesizing KG definitions and its development pipeline. In addition, we explore the MKG construction in public transport using smart card data and developed two generic decomposition approaches to extract hidden relations including rule-based and neural network-based models.

<!-- Meanless: Springer-->




<!-- Meanless: 1140 Transportation (2025) 52:1119-1145-->

The case study using smart card data in urban railways validates the model performance and illustrates the value of MKG in predicting an individual trip destination by comparing it with real observations and benchmark approaches. We find that the neural network-based MKG construction method achieves an accuracy level close to the 'theoretical' upper bound performance of the prediction task. It has important implications for the pubic transport trip destination inference for fare systems with only boarding provisions.

In many cities, such as Stockholm, the smart card system in public transport only records the tap-in data without the tap-out data. Predicting individual trip destinations in such cities is challenging since the detailed individual trip trajectory data cannot be accessed to develop the MKG. In such a case, the mobility data from other sources in the same city (e.g., taxi trajectory data, geotagging check-ins data, etc.) can be used to infer the location-location relations for the MKG. The constructed MKG then would provide useful information to infer the individual trip destination in public transport, which needs further testing in future work.

People with the same travel activity and traveling from the same origin station at the same time would be more likely to visit the same destination. Therefore, the relations (activities) in MKG contribute to inferring the real attention (dependency) of users to stations/locations even if the user-station visiting data is not observed (missing or zero values). This is a common problem in public transport (i.e., no visit does not necessarily mean no attention or interest to a location) and it helps to a better understanding of human mobility (e.g., travel purpose) and facilitates downstream applications in transport, such as location recommendation. Moreover, the station-station relationship in MKG is also of great significance for other application scenarios. For example, precision marketing can assist in locating more target groups and placing targeted advertisements based on the main travel activities of stations/locations.

Translating the numerical relations to semantic ones for practical uses is challenging given the unsupervised learning manner of the approach. We discussed a qualitative approach in that direction and interesting. The future research direction is to develop a systematic approach to map the hidden relations to semantic meanings and validate these mappings using additional data sources, e.g., household travel surveys.

Acknowledgements This work was supported by the China Scholarship Council under Grant 202006950007 and partly funded by TRENoP and Digital Futures at KTH. ChatGPT was used for enhancing the grammatical accuracy and improving the language of the paper.

Author Contributions The authors confirm contributions to the paper as follows: study conception and design: ZM, PZ, QZ; methodology and data collection: QZ, PZ, ZM; analysis and interpretation of results: QZ, ZM, EJ; draft manuscript preparation: QZ and ZM; manuscript revision: ZM, PZ, EJ; All authors reviewed the results and approved the final version of the manuscript.

Funding Open access funding provided by Royal Institute of Technology.

Data availability The datasets analyzed during the current study are available from the corresponding author upon reasonable request.

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1141-->

## Declarations

Conflict of interest The authors declare that they have no competing interests.

Ethics approval and consent to participate This article does not contain any studies with human participants or animals performed by the author.

Open Access This article is licensed under a Creative Commons Attribution 4.0 International License, which permits use, sharing, adaptation, distribution and reproduction in any medium or format, as long as you give appropriate credit to the original author(s) and the source, provide a link to the Creative Commons licence, and indicate if changes were made. The images or other third party material in this article are included in the article's Creative Commons licence, unless indicated otherwise in a credit line to the material. If material is not included in the article's Creative Commons licence and your intended use is not permitted by statutory regulation or exceeds the permitted use, you will need to obtain permission directly from the copyright holder. To view a copy of this licence, visit http://creativecommons.org/licenses/by/4.0/.

## References

Alsger, A., Assemi, B., Mesbah, M., Ferreira, L.: Validating and improving public transport origin-destination estimation algorithm using smart card fare data. Transp. Res. Part C Emerg. Technol. 68, 490-506 (2016)

Assemi, B., Alsger, A., Moghaddam, M., Hickman, M., Mesbah, M.: Improving alighting stop inference accuracy in the trip chaining method using neural networks. Public Transp. 12(1), 89-121 (2020)

Barry, J.J., Newhouser, R., Rahbee, A., Sayeda, S.: Origin and destination estimation in New York city with automated fare system data. Transp. Res. Record 1817(1), 183-187 (2002)

Bean, D.M., Wu, H., Iqbal, E., Dzahini, O., Ibrahim, Z.M., Broadbent, M., Stewart, R., Dobson, R.J.: Knowledge graph prediction of unknown adverse drug reactions and validation in electronic health records. Sci. Reports 7(1), 1-11 (2017)

Berven, A., Christensen, O.A., Moldeklev, S., Opdahl, A.L., Villanger, K.J.: A knowledge-graph platform for newsrooms. Comput. Ind. 123, 103321 (2020)

Cao, Y., Wang, X., He, X., Hu, Z., Chua, T.-S.: Unifying knowledge graph learning and recommendation: Towards a better understanding of user preferences. In: The World Wide Web Conference, pp. 151-161 (2019)

Carriero, V.A., Gangemi, A., Mancinelli, M.L., Marinucci, L., Nuzzolese, A.G., Presutti, V., Veninata, C.: Arco: The italian cultural heritage knowledge graph. In: International Semantic Web Conference, pp. 36-52 (2019). Springer

Chen, Y., Kuang, J., Cheng, D., Zheng, J., Gao, M., Zhou, A.: Agrikg: an agricultural knowledge graph and its applications. In: International Conference on Database Systems for Advanced Applications, pp. 533-537 (2019). Springer

Chen, P., Lu, Y., Zheng, V.W., Chen, X., Yang, B.: Knowedu: a system to construct knowledge graph for education. IEEE Access 6, 31553-31563 (2018)

Chen, Z., Wang, Y., Zhao, B., Cheng, J., Zhao, X., Duan, Z.: Knowledge graph completion: a review. IEEE Access 8, 192435-192456 (2020)

Chen, L., Tang, X., Chen, W., Qian, Y., Li, Y., Zhang, Y.: Dacha: a dual graph convolution based temporal knowledge graph representation learning method using historical relation. ACM Trans. Knowl. Discov. Data (TKDD) 16(3), 1-18 (2021)

Cheng, Y., Jiao, Y., Wei, W., Wu, Z.: Research on construction method of knowledge graph in the civil aviation security field. In: 2019 IEEE 1st International Conference on Civil Aviation Safety and Information Technology (ICCASIT), pp. 556-559 (2019). IEEE

Chenglin, Q., Qing, S., Pengzhou, Z., Hui, Y.: Cn-makg: China meteorology and agriculture knowledge graph construction based on semi-structured data. In: 2018 IEEE/ACIS 17th International Conference on Computer and Information Science (ICIS), pp. 692-696 (2018). IEEE

Chi, Y., Qin, Y., Song, R., Xu, H.: Knowledge graph in smart education: a case study of entrepreneurship scientific publication management. Sustainability $\mathbf{{10}}\left( 4\right) ,{995}\left( {2018}\right)$

Chun, S., Jung, J., Jin, X., Seo, S., Lee, K.-H.: Designing an integrated knowledge graph for smart energy services. J. Supercomput. 76(10), 8058-8085 (2020)

<!-- Meanless: Springer-->




<!-- Meanless: 1142 Transportation (2025) 52:1119-1145-->

Dang, F., Tang, J., Li, S.: Mooc-kg: a mooc knowledge graph for cross-platform online learning resources. In: 2019 IEEE 9th International Conference on Electronics Information and Emergency Communication (ICEIEC), pp. 1-8 (2019). IEEE

Deng, S., Rangwala, H., Ning, Y.: Dynamic knowledge graph based multi-event forecasting. In: Proceedings of the 26th ACM SIGKDD International Conference on Knowledge Discovery & Data Mining, pp. 1585-1595 (2020)

Dou, H., Liu, H., Yang, X.: Od matrix estimation method of public transportation flow based on passenger boarding and alighting. Comput. Commun. 25(135), 79 (2007)

Dsouza, A., Tempelmeier, N., Yu, R., Gottschalk, S., Demidova, E.: Worldkg: A world-scale geographic knowledge graph. In: Proceedings of the 30th ACM International Conference on Information & Knowledge Management, pp. 4475-4484 (2021)

Du, J., Wang, S., Ye, X., Sinton, D.S., Kemp, K.: Gis-kg: building a large-scale hierarchical knowledge graph for geographic information science. Int. J. Geogr. Inf. Sci. 36(5), 873-897 (2022)

Dziugaite, G.K., Roy, D.M.: Neural network matrix factorization. arXiv preprint arXiv:1511.06443 (2015)

Elhammadi, S., Lakshmanan, L.V., Ng, R., Simpson, M., Huai, B., Wang, Z., Wang, L.: A high precision pipeline for financial knowledge graph construction. In: Proceedings of the 28th International Conference on Computational Linguistics, pp. 967-977 (2020)

Ernst, P., Siu, A., Weikum, G.: Knowlife: a versatile approach for constructing a large knowledge graph for biomedical sciences. BMC Bioinform. 16(1), 1-13 (2015)

Fang, Y., Wang, H., Zhao, L., Yu, F., Wang, C.: Dynamic knowledge graph based fake-review detection. Appl. Intell. $\mathbf{{50}}\left( {12}\right) ,{4281} - {4295}\left( {2020}\right)$

Gao, Z., Janssens, D., Jia, B., Wets, G., Yang, Y., et al.: Identifying business activity-travel patterns based on gps data. Transp. Res. Part C Emerg. Technol. 128, 103136 (2021)

Gonçalves, J., Gomes, M., Ezequiel, S.: Defining mobility patterns in peri-urban areas: a contribution for spatial and transport planning policy. Case Stud. Transp. Policy 5(4), 643-655 (2017)

Gong, F., Wang, M., Wang, H., Wang, S., Liu, M.: Smr: medical knowledge graph embedding for safe medicine recommendation. Big Data Res. 23, 100174 (2021)

Hao, J., Zhao, L., Milisavljevic-Syed, J., Ming, Z.: Integrating and navigating engineering design decision-related knowledge using decision knowledge graph. Adv. Eng. Inform. 50, 101366 (2021)

Hao, X., Ji, Z., Li, X., Yin, L., Liu, L., Sun, M., Liu, Q., Yang, R.: Construction and application of a knowledge graph. Remote Sens. 13(13), 2511 (2021)

Haussmann, S., Seneviratne, O., Chen, Y., Ne'eman, Y., Codella, J., Chen, C.-H., McGuinness, D.L., Zaki, M.J.: Foodkg: a semantics-driven knowledge graph for food recommendation. In: International Semantic Web Conference, pp. 146-162 (2019). Springer

Hu, S., Weng, J., Liang, Q., Zhou, W., Wang, P.: Individual travel knowledge graph-based public transport commuter identification: A mixed data learning approach. J. Adv. Transp. 2022 (2022)

Hu, L., Li, Z., Ye, X.: Delineating and modeling activity space using geotagged social media data. Cartogr. Geogr. Inf. Sci. 47(3), 277-288 (2020)

Jia, Y., Qi, Y., Shang, H., Jiang, R., Li, A.: A practical approach to constructing a knowledge graph for cybersecurity. Engineering $\mathbf{4}\left( 1\right) ,{53} - {60}\left( {2018}\right)$

Jiang, Y., Gao, X., Su, W., Li, J.: Systematic knowledge management of construction safety standards based on knowledge graphs: a case study in china. Int. J. Environ. Res. Public Health 18(20), 10692 (2021)

Jin, M., Wang, M., Gong, Y., Liu, Y.: Spatio-temporal constrained origin-destination inferring using public transit fare card data. Phys. A Stat. Mech. Appl. 127642 (2022)

Jung, J., Sohn, K.: Deep-learning architecture to forecast destinations of bus passengers from entry-only smart-card data. IET Intell. Transp. Syst. 11(6), 334-339 (2017)

Keller, M. R.: Building a knowledge graph for the air traffic management community. In: Companion Proceedings of The 2019 World Wide Web Conference, pp. 700-704 (2019)

Kim, H.: Building a k-pop knowledge graph using an entertainment ontology. Knowl. Manag. Res. Pract. 15(2), 305-315 (2017)

Klema, V., Laub, A.: The singular value decomposition: its computation and some applications. IEEE Trans. Autom. Control 25(2), 164-176 (1980)

Lee, D., Seung, H.S.: Algorithms for non-negative matrix factorization. Adv. Neural Inf. Process. Syst. 13 (2000)

Lei, D., Chen, X., Cheng, L., Zhang, L., Wang, P., Wang, K.: Minimum entropy rate-improved trip-chain method for origin-destination estimation using smart card data. Transp. Res. Part C Emerg. Technol. 130, 103307 (2021)

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1143-->

Li, F.-L., Chen, H., Xu, G., Qiu, T., Ji, F., Zhang, J., Chen, H.: Alimekg: domain knowledge graph construction and application in e-commerce. In: Proceedings of the 29th ACM International Conference on Information & Knowledge Management, pp. 2581-2588 (2020)

Li, L., Wang, P., Yan, J., Wang, Y., Li, S., Jiang, J., Sun, Z., Tang, B., Chang, T.-H., Wang, S., et al.: Real-world data medical knowledge graph: construction and applications. Artif. Intell. Med. 103, 101817 (2020)

Li, N., Yang, Z., Luo, L., Wang, L., Zhang, Y., Lin, H., Wang, J.: Kghc: a knowledge graph for hepatocellular carcinoma. BMC Med. Inform. Dec. Mak. 20(3), 1-11 (2020)

Liao, S., Liang, S., Meng, Z., Zhang, Q.: Learning dynamic embeddings for temporal knowledge graphs. In: Proceedings of the 14th ACM International Conference on Web Search and Data Mining, pp. 535-543 (2021)

Liu, W., Tan, Q., Liu, L.: Destination estimation for bus passengers based on data fusion. Math. Probl. Eng. 2020 (2020)

Liu, Y., Zeng, Q., Ordieres Meré, J., Yang, H.: Anticipating stock market of the renowned companies: a knowledge graph approach. Complexity 2019 (2019)

Liu, K.: A survey on neural relation extraction. Sci. China Technol. Sci. 63(10), 1971-1989 (2020)

Liu, J., Schmid, F., Li, K., Zheng, W.: A knowledge graph-based approach for exploring railway operational accidents. Reliab. Eng. Syst. Saf. 207, 107352 (2021)

Mao, S., Zhao, Y., Chen, J., Wang, B., Tang, Y.: Development of process safety knowledge graph: a case study on delayed coking process. Comput. Chem. Eng. 143, 107094 (2020)

Mezni, H.: Temporal knowledge graph embedding for effective service recommendation. IEEE Trans. Serv. Comput. 15, 3077-3088 (2021)

Munizaga, M., Devillaine, F., Navarrete, C., Silva, D.: Validating travel behavior estimated from smartcard data. Transp. Res. Part C Emerg. Technol. 44, 70-79 (2014)

Muppalla, R., Lalithsena, S., Banerjee, T., Sheth, A.: A knowledge graph framework for detecting traffic events using stationary cameras. In: Proceedings of the 2017 ACM on Web Science Conference, pp. 431-436 (2017)

Nayak, T., Majumder, N., Goyal, P., Poria, S.: Deep neural approaches to relation triplets extraction: a comprehensive survey. Cogn. Comput. 13(5), 1215-1232 (2021)

Pourhabibi, T., Ong, K.-L., Kam, B.H., Boo, Y.L.: Fraud detection: a systematic literature review of graph-based anomaly detection approaches. Decis. Support Syst. 133, 113303 (2020)

Rotmensch, M., Halpern, Y., Tlimat, A., Horng, S., Sontag, D.: Learning a health knowledge graph from electronic medical records. Sci. Rep. 7(1), 1-11 (2017)

Ruan, T., Xue, L., Wang, H., Hu, F., Zhao, L., Ding, J.: Building and exploring an enterprise knowledge graph for investment analysis. In: International Semantic Web Conference, pp. 418-436 (2016). Springer

Sánchez-Martínez, G.E.: Inference of public transportation trip destinations by using fare transaction and vehicle location data: dynamic programming approach. Transp. Res. Record 2652(1), 1-7 (2017)

Sang, S., Yang, Z., Wang, L., Liu, X., Lin, H., Wang, J.: Sematyp: a knowledge graph based literature mining method for drug discovery. BMC Bioinform. $\mathbf{{19}}\left( 1\right) ,1 - {11}$ (2018)

Sha, X., Sun, Z., Zhang, J.: Hierarchical attentive knowledge graph embedding for personalized recommendation. Electron. Commer. Res. Appl. 48, 101071 (2021)

Shan, S., Cao, B.: Follow a guide to solve urban problems: the creation and application of urban knowledge graph. IET Softw. 11(3), 126-134 (2017)

Shang, J., Xiao, C., Ma, T., Li, H., Sun, J.: Gamenet: Graph augmented memory networks for recommending medication combination. In: Proceedings of the AAAI Conference on Artificial Intelligence, vol. 33, pp. 1126-1133 (2019)

Shi, L., Li, S., Yang, X., Qi, J., Pan, G., Zhou, B.: Semantic health knowledge graph: semantic integration of heterogeneous medical knowledge and services. BioMed research international 2017 (2017)

Smirnova, A., Cudré-Mauroux, P.: Relation extraction using distant supervision: a survey. ACM Comput. Surv. (CSUR) 51(5), 1-35 (2018)

Szekely, P., Knoblock, C.A., Slepicka, J., Philpot, A., Singh, A., Yin, C., Kapoor, D., Natarajan, P., Marcu, D., Knight, K., et al.: Building and using a knowledge graph to combat human trafficking. In: International Semantic Web Conference, pp. 205-221 (2015). Springer

Tan, J., Qiu, Q., Guo, W., Li, T.: Research on the construction of a knowledge graph and knowledge reasoning model in the field of urban traffic. Sustainability 13(6), 3191 (2021)

Tang, Y., Liu, T., Liu, G., Li, J., Dai, R., Yuan, C.: Enhancement of power equipment management using knowledge graph. In: 2019 IEEE Innovative Smart Grid Technologies-Asia (ISGT Asia), pp. 905-910 (2019). IEEE

<!-- Meanless: Springer-->




<!-- Meanless: 1144 Transportation (2025) 52:1119-1145-->

Trépanier, M., Tranchant, N., Chapleau, R.: Individual trip destination estimation in a transit smart card automated fare collection system. J. Intell. Transp. Syst. 11(1), 1-14 (2007)

Trivedi, R., Dai, H., Wang, Y., Song, L.: Know-evolve: Deep temporal reasoning for dynamic knowledge graphs. In: International Conference on Machine Learning, pp. 3462-3471 (2017). PMLR

Wang, S., Lv, Y., Peng, Y., Piao, X., Zhang, Y.: Metro traffic flow prediction via knowledge graph and spatiotemporal graph neural network. J. Adv. Transp. (2022)

Wang, H., Qin, K., Zakari, R.Y., Lu, G., Yin, J.: Deep neural network-based relation extraction: an overview. Neural Comput. Appl., 1-21 (2022)

Wang, H., Zhang, F., Wang, J., Zhao, M., Li, W., Xie, X., Guo, M.: Ripplenet: Propagating user preferences on the knowledge graph for recommender systems. In: Proceedings of the 27th ACM International Conference on Information and Knowledge Management, pp. 417-426 (2018)

Wang, W., Attanucci, J.P., Wilson, N.H.: Bus passenger origin-destination estimation and related analyses using automated data collection systems. J. Public Transp. 14(4), 7 (2011)

Xie, C., Yu, B., Zeng, Z., Yang, Y., Liu, Q.: Multilayer internet-of-things middleware based on knowledge graph. IEEE Internet Things J 8(4), 2635-2648 (2020)

Yang, B., Liao, Y.-M.: Research on enterprise risk knowledge graph based on multi-source data fusion. Neural Comput. Appl. 34(4), 2569-2582 (2022)

Yu, T., Li, J., Yu, Q., Tian, Y., Shun, X., Xu, L., Zhu, L., Gao, H.: Knowledge graph for tcm health preservation: design, construction, and applications. Artif. Intell. Med. 77, 48-52 (2017)

Zhang, Q., Wen, Y., Zhou, C., Long, H., Han, D., Zhang, F., Xiao, C.: Construction of knowledge graphs for maritime dangerous goods. Sustainability 11(10), 2849 (2019)

Zhang, D., Cui, M., Yang, Y., Yang, P., Xie, C., Liu, D., Yu, B., Chen, Z.: Knowledge graph-based image classification refinement. IEEE Access 7, 57678-57690 (2019)

Zhang, Y., Sheng, M., Zhou, R., Wang, Y., Han, G., Zhang, H., Xing, C., Dong, J.: Hkgb: an inclusive, extensible, intelligent, semi-auto-constructed knowledge graph framework for healthcare with clinicians' expertise incorporated. Inf. Process. Manag. 57(6), 102324 (2020)

Zhang, F., Sun, B., Diao, X., Zhao, W., Shu, T.: Prediction of adverse drug reactions based on knowledge graph embedding. BMC Med. Inform. Decis. Mak. 21(1), 1-11 (2021)

Zhao, Z., Koutsopoulos, H.N., Zhao, J.: Discovering latent activity patterns from transit smart card data: a spatiotemporal topic model. Transp. Res. Part C Emerg. Technol. 116, 102627 (2020)

Zhou, G., Chen, F.: Urban congestion areas prediction by combining knowledge graph and deep spatiotemporal convolutional neural network. In: 2019 4th International Conference on Electromechanical Control Technology and Transportation (ICECTT), pp. 105-108 (2019). IEEE

Zhou, S., Dai, X., Chen, H., Zhang, W., Ren, K., Tang, R., He, X., Yu, Y.: Interactive recommender system via knowledge graph-enhanced reinforcement learning. In: Proceedings of the 43rd International Acm Sigir Conference on Research and Development in Information Retrieval, pp. 179-188 (2020)

Zhou, K., Zhao, W.X., Bian, S., Zhou, Y., Wen, J.-R., Yu, J.: Improving conversational recommender systems via knowledge graph based semantic fusion. In: Proceedings of the 26th ACM SIGKDD International Conference on Knowledge Discovery & Data Mining, pp. 1006-1014 (2020)

Zhuang, C., Yuan, N.J., Song, R., Xie, X., Ma, Q.: Understanding people lifestyles: construction of urban movement knowledge graph from gps trajectory. In: Ijcai, pp. 3616-3623 (2017)

Publisher's Note Springer Nature remains neutral with regard to jurisdictional claims in published maps and institutional affiliations.

Qi Zhang received the M.S. degree in traffic information engineering and control from Wuhan University of Technology. He is currently pursuing the Ph.D. degree with the Division of Transport Planning, KTH Royal Institute of Technology, Stockholm. His research interests include individual mobility, knowledge graph, causal graph discovery, delay propagation etc.

Zhenliang Ma is an Assistant Professor of road traffic engineering with the KTH Royal Institute of Technology. His research interests include statistics, machine learning, computer science based modeling, simulation, optimization, and control within the framework of selected mobility-related complex systems, which are: intelligent transport systems (traffic public transport/rails) and personal information systems (transport/ energy).

<!-- Meanless: Springer-->




<!-- Meanless: Transportation (2025) 52:1119-1145 1145-->

Pengfei Zhang is an Assistant Researcher with the Institute of Physics, Henan Academy of Sciences, Zhengzhou, China. He received the M.S. degree in control engineering from Hohai University in 2017 and the Ph.D. degree in traffic information engineering and control from the South China University of Technology in 2021. From 2019 to 2020, he was a Visiting Ph.D. Student with the NU-MIT Transit Group, Northeastern University, Boston, MA, USA. His research interests include deep learning in transportation, individual mobility modeling, computer vision, and transportation mode choice.

Erik Jenelius is currently a Professor with the Division of Transport Planning, KTH Royal Institute of Technology, Stockholm. He is also the Manager of the Urban Mobility Group, which aims to tackle the challenges of congestion, crowding, and environmental impacts in urban transport systems through the development of methods based on statistical analysis, network modeling, computer simulation, and optimization approaches. He is the Director of the iMobility Laboratory, focused on the use of emerging sensor technologies to address urban mobility problems. His research interests include data-driven traffic and mobility management, transportation network and resilience analysis, and transit systems planning and operations.

<!-- Meanless: Springer-->

